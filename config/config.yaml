# QQ到VRChat双向绑定机器人配置文件

# 应用基本配置
app:
  name: "QQ-VRC双向绑定机器人"
  version: "1.0.0"
  enabled: true
  log_level: "INFO"  # DEBUG, INFO, WARNING, ERROR
  data_dir: "./data"
  log_dir: "./logs"

# Napcat QQ Bot配置
napcat:
  enabled: true
  host: "127.0.0.1"
  port: 3000
  access_token: ""  # 如果设置了访问令牌
  webhook_url: ""   #  webhook地址

# VRChat API配置
vrchat:
  username: ""      # VRChat用户名
  password: ""      # VRChat密码
  api_key: "JlE5Jldo5JibnkqO"  # VRChat API Key (默认)
  proxy:
    enabled: false
    http_proxy: "http://127.0.0.1:7890"
    https_proxy: "http://127.0.0.1:7890"
  
  # 二步验证配置
  two_factor:
    enabled: false
    # 验证方式：totp, email
    method: "totp"  
    # TOTP密钥（可选，用于自动生成验证码）
    totp_secret: ""

# 群组配置
groups:
  # 管理的QQ群列表
  managed_groups:
    - group_id: 123456789
      enabled: true
      # VRChat群组ID
      vrc_group_id: "grp_fdd4cdf6-b3e0-4be3-a040-5b8abf2617f4"
      # 自动分配的角色ID
      auto_assign_role: "rol_xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
      # 入群审查关键词
      join_request_keyword: "VRChat用户ID"
      # 群管理员QQ号
      admin_qq_ids: [111111, 222222]

# 消息模板配置
messages:
  # 入群欢迎消息
  welcome_message: |
    欢迎 %vrc_username% 加入本群！
    您的VRChat用户ID: %vrc_userid%
    已自动为您分配角色，祝您游戏愉快！
  
  # 退群消息
  leave_message: |
    用户 %vrc_username% (%vrc_userid%) 已离开群组
  
  # 入群申请审查消息（发送给管理员）
  review_request: |
    有新的入群申请需要审查：
    QQ号: %qq_user_num%
    VRChat用户ID: %vrc_userid%
    请在VRChat中确认用户信息
  
  # 自动分配角色失败消息
  role_assignment_failed: |
    为用户 %vrc_username% (%vrc_userid%) 分配角色失败
    失败原因: %error_reason%
    请管理员手动处理
  
  # 入群申请格式错误
  invalid_format: |
    您的入群申请格式不正确
    请提供正确的VRChat用户ID格式：usr_xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx
  
  # 手动绑定成功
  manual_bind_success: |
    绑定成功！
    QQ: %qq_user_num%
    VRChat: %vrc_username% (%vrc_userid%)
  
  # 手动解绑成功
  manual_unbind_success: |
    解绑成功！
    QQ: %qq_user_num%
    VRChat: %vrc_username% (%vrc_userid%)

# 审查规则
review:
  # 自动批准入群申请
  auto_approve: true
  # VRChat用户ID格式验证正则
  userid_pattern: "usr_[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}"
  # 检查用户是否存在且未被禁用的开关
  check_user_status: true
  # 自动添加角色失败后的处理方式: notify_admin, ignore
  on_role_fail: "notify_admin"

# 数据库配置（使用JSON文件存储）
database:
  type: "json"  # 目前只支持JSON文件存储
  file_path: "./data/user_bindings.json"
  backup_enabled: true
  backup_interval: 86400  # 秒，24小时备份一次